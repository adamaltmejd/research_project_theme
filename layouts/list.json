{{/*
  JSON index for list pages.
  Used by list-filter.js for client-side filtering and search.
*/}}
{{- $pages := .Pages.ByDate.Reverse -}}
[
{{- range $index, $page := $pages -}}
  {{- if $index }},{{ end -}}
  {
    "title": {{ $page.Title | htmlUnescape | jsonify }},
    "authors": {{ delimit ($page.Params.authors | default slice) ", " | jsonify }},
    "desc": {{ $page.Summary | plainify | htmlUnescape | jsonify }},
    "content": {{ $page.Plain | htmlUnescape | jsonify }},
    "journal": {{ $page.Params.journal | default "" | jsonify }},
    "status": {{ $page.Params.status | default "" | jsonify }},
    "subject": {{ with $page.Params.subject }}{{ if reflect.IsSlice . }}{{ . | jsonify }}{{ else }}[{{ . | jsonify }}]{{ end }}{{ else }}[]{{ end }},
    "paper_url": {{ $page.Params.paper_url | default "" | jsonify }},
    "section": {{ $page.Section | jsonify }},
    "date_formatted": {{ $page.Date | time.Format "January 2006" | jsonify }},
    "lastmod": {{ $page.Lastmod | time.Format "2006-01-02" | jsonify }},
    "lastmod_formatted": {{ $page.Lastmod | time.Format "Mon, Jan 2, 2006" | jsonify }},
    "permalink": {{ $page.Permalink | jsonify }},
    "relpermalink": {{ $page.RelPermalink | jsonify }}
  }
{{- end -}}
]